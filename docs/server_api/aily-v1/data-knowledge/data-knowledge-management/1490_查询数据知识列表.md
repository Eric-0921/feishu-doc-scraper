# 查询数据知识列表

> Source: https://open.feishu.cn/document/aily-v1/data-knowledge/data-knowledge-management/list

---

# 获取数据知识列表

获取 Aily 助手的数据知识列表
**注意事项**：- `tenant_access_token` 仅支持[ Aily 平台](https://aily.feishu.cn)的渠道应用身份
- `user_access_token` 要求开发者需要 Aily 平台的应用协作者角色，包括管理员、开发者、运维人员

## 请求

基本 | &nbsp;
---|---
HTTP URL | https://open.feishu.cn/open-apis/aily/v1/apps/:app_id/data_assets
HTTP Method | GET
接口频率限制 | [10 次/秒](https://open.feishu.cn/document/ukTMukTMukTM/uUzN04SN3QjL1cDN)
支持的应用类型 | Custom App
权限要求<br>**调用该 API 所需的权限。开启其中任意一项权限即可调用** | 获取智能伙伴创建平台数据知识资产(aily:data_asset:read)

### 请求头

名称 | 类型 | 必填 | 描述
---|---|---|---
Authorization | string | 是 | `tenant_access_token`<br>或<br>`user_access_token`<br>**值格式**："Bearer `access_token`"<br>**示例值**："Bearer u-7f1bcd13fc57d46bac21793a18e560"<br>[了解更多：如何选择与获取 access token](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-choose-which-type-of-token-to-use)

### 路径参数

名称 | 类型 | 描述
---|---|---
app_id | string | Aily 平台的应用的APPID，可以直接从 Aily 应用的URL中获取。获取示例：/ai/{APPID}<br>**示例值**："spring_5862e4fea8__c"<br>**数据校验规则**：<br>- 长度范围：`0` ～ `255` 字符

### 查询参数

名称 | 类型 | 必填 | 描述
---|---|---|---
page_size | int | 否 | 分页参数：分页大小，默认：20，最大：100<br>**示例值**：10
page_token | string | 否 | 分页标记，第一次请求不填，表示从头开始遍历；分页查询结果还有更多项时会同时返回新的 page_token，下次遍历可采用该 page_token 获取查询结果<br>**示例值**：eVQrYzJBNDNONlk4VFZBZVlSdzlKdFJ4bVVHVExENDNKVHoxaVdiVnViQT0=
keyword | string | 否 | 模糊匹配关键词<br>**示例值**：电影<br>**数据校验规则**：<br>- 长度范围：`0` ～ `255` 字符
data_asset_ids | string\[\] | 否 | 根据数据知识 ID 进行过滤<br>**示例值**：asset_aadg2b5os5wjg<br>**数据校验规则**：<br>- 长度范围：`0` ～ `255`
data_asset_tag_ids | string\[\] | 否 | 根据数据知识分类 ID 进行过滤<br>**示例值**：spring_5862e4fea8__c__asset_tag_aadg2b5ql4gbs<br>**数据校验规则**：<br>- 长度范围：`0` ～ `255`
with_data_asset_item | boolean | 否 | 结果是否包含数据与知识项目<br>**示例值**：true
with_connect_status | boolean | 否 | 结果是否包含数据连接状态<br>**示例值**：false

## 响应

### 响应体

名称 | 类型 | 描述
---|---|---
code | int | 错误码，非 0 表示失败
msg | string | 错误描述
data | \- | \-
items | data_asset\[\] | 数据知识列表
data_asset_id | string | 数据知识ID
label | map&lt;string, string&gt; | 数据知识标题
description | map&lt;string, string&gt; | 数据知识描述
data_source_type | string | 数据资源类型<br>**可选值有**：<br>- excel：excel<br>- pdf：pdf<br>- pptx：pptx<br>- txt：txt<br>- docx：docx<br>- mysql：mysql<br>- postgresql：postgresql<br>- larkbase：飞书多维表格<br>- salesforce：salesforce<br>- fenxiangxiaoke：分享逍客<br>- qianchuan：巨量千川<br>- clickhouse：clickhouse<br>- databricks：databricks<br>- servicedesk：飞书服务台<br>- larkbiz_wiki：飞书Wiki<br>- larkbiz_doc：飞书doc<br>- larkbiz_docs：飞书docs<br>- larkbiz_docx：飞书docx<br>- larkbiz_pdf：飞书pdf<br>- larkbiz_word：飞书word<br>- larkbiz_pptx：飞书pptx<br>- larkbiz_sheets：飞书文档<br>- larkbiz_base：飞书多维表格<br>- larkbiz_personalfolder：飞书个人文件夹<br>- larkbiz_sharedfolder：飞书共享文件夹<br>- object：数据表
connect_status | string | 数据连接状态<br>**可选值有**：<br>- awaiting：等待连接<br>- syncing：连接中<br>- successful：连接成功<br>- continuously_syncing：增量同步中<br>- partially_successful：部分成功<br>- failed：连接失败
tags | data_asset_tag\[\] | 数据知识分类列表
data_asset_tag_id | string | 数据知识分类名称
name | string | 数据知识分类ID
items | data_asset_item\[\] | 数据知识项列表
data_asset_item_id | string | 数据知识项ID
api_name | string | 数据知识项标识
label | map&lt;string, string&gt; | 数据知识项标题
description | map&lt;string, string&gt; | 数据知识项描述
resources | data_asset_resource\[\] | 数据知识资源
resource_id | string | 数据知识资源ID
resource_type | string | 数据知识资源类型<br>**可选值有**：<br>- dataset：数据视图<br>- vector：知识视图
connect_failed_reason | string | 连接状态失败信息
connect_type | string | 数据连接类型<br>**可选值有**：<br>- import：导入<br>- direct：直连
created_time | string | 创建时间，毫秒时间戳
updated_time | string | 更新时间，毫秒时间戳
page_token | string | 分页标记，当 has_more 为 true 时，会同时返回新的 page_token，否则不返回 page_token
has_more | boolean | 是否还有更多项

### 响应体示例
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "items": [
            {
                "data_asset_id": "asset_aadg3mcgvpybu",
                "label": {
                    "zh_cn": "数据知识标题"
                },
                "description": {
                    "zh_cn": "这个是电影相关的知识集合"
                },
                "data_source_type": "excel",
                "connect_status": "successful",
                "tags": [
                    {
                        "data_asset_tag_id": "spring_5862e4fea8__c__asset_tag_aadg2b5ql4gbs",
                        "name": "电影"
                    }
                ],
                "items": [
                    {
                        "data_asset_item_id": "asset_item_aadg3mcgvpydu",
                        "api_name": "movie",
                        "label": {
                            "zh_cn": "标题"
                        },
                        "description": {
                            "zh_cn": "描述内容"
                        },
                        "resources": [
                            {
                                "resource_id": "spring_5862e4fea8__c__dataset_aadg3lxm4j6mg",
                                "resource_type": "dataset"
                            }
                        ]
                    }
                ],
                "connect_failed_reason": "连接超时",
                "connect_type": "direct",
                "created_time": "1711975665710",
                "updated_time": "1711975665710"
            }
        ],
        "page_token": "eVQrYzJBNDNONlk4VFZBZVlSdzlKdFJ4bVVHVExENDNKVHoxaVdiVnViQT0=",
        "has_more": true
    }
}
```

### 错误码

HTTP状态码 | 错误码 | 描述 | 排查建议
---|---|---|---
400 | 2700001 | param is invalid | 请结合文档排查请求参数
403 | 2701004 | permission denied | 无权限，请检查是否有开发者/云纹人员权限
